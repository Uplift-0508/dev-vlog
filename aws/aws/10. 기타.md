AWS 는 웹 브라우저로 콘솔에 접속해서 기능을 조작할 수도 있지만 콘솔에서 할 수 있는 모든 기능에 대해 API 를 제공하고 있고, 해당 API 는 HTTP 프로토콜로 직접 호출하거나 AWS 에서 만들고 제공하는 CLI 와 SDK 로 사용할 수 있습니다. 이는 AWS 의 서비스와 기능들을 사람이 아닌 프로그램으로 조작해서 많은 일을 자동화할 수 있다는 큰 장점을 가져다 줍니다. 

## CLI
CLI (Command Line Interface) 는 명령줄에서 AWS 서비스를 조작할 수 있게 해주는 도구입니다. AWS 콘솔에서의 모든 기능을 지원합니다. 자주 쓰는 기능들을 매번 AWS 콘솔에 접속할 필요 없이 로컬 머신에서 조작할 수도 있고 스크립트를 작성해서 AWS 에서 제공하지 않는 자동화 기능들을 내 입맛에 맞게 만들어 사용할 수도 있습니다. 

## SDK
SDK (Software Development Kit) 은 사용자들이 사용하는 프로그래밍 언어에서 쉽게 AWS 의 기능들을 조작할 수 있게 만들어준 라이브러리입니다. 자바, 파이썬, 자바스크립트, 루비 등 대부분의 언어에 대해 제공되고 있기 때문에, S3 에 파일을 업로드하거나 다운로드 등 AWS 서비스를 사용해야 하는 모든 경우에 대해 SDK 를 사용하면 됩니다. 

## 파일 스토리지

### EC2 인스턴스 스토어
EC2 인스턴스를 생성할 때마다 생성하는 스토리지입니다. 인스턴스에 물리적으로 연결된 디스크의 스토리지로 인스턴스 수명 기간 동안에만 유지되기 때문에 인스턴스가 종료되면 함께 삭제되는 임시 스토리지입니다. 임시 데이터가 아닌 영구적으로 보존해야 하는 데이터는 다른 스토리지에 저장해둬야 합니다.

### EBS (Elastic Block Store)
실행 중인 인스턴스에 연결할 수 있는 스토리지입니다. 데이터에 빠르게 액세스하고 장기적으로 데이터를 보존해야 하는 경우 사용하면 좋은 방법입니다. 보통 인스턴스에서 데이터베이스 엔진을 직접 실행할 때 사용합니다. 인스턴스 수명 기간과 별도로 관리되고 한 인스턴스에서 여러 EBS 를 연결할 수도 있고, 한 인스턴스에서 EBS 와의 연결을 끊으면 다른 인스턴스에 이 EBS 를 연결해서 사용하는 것도 가능합니다. 

### EFS (Amazon Elastic File System)
EC2 에서 사용할 수 있는 확장 가능한 파일 스토리지를 제공합니다. EBS 와 마찬가지로 인스턴스 수명 기간과 별도로 존재합니다. EBS 와 다르게 하나의 EFS 파일 시스템을 생성한 후 여러 인스턴스에 마운트해서 공통 데이터 소스로도 사용할 수 있습니다. 

### S3 (Simple Storage Service)
S3 는 EC2 뿐만 아니라 웹, 다른 AWS 서비스에서도 바로 파일에 접근할 수 있도록 만들어진 서비스입니다. 보통 웹 서비스를 운영할 때 가장 많이 사용하는 서비스로서 애플리케이션에 필요한 이미지와 같은 정적 데이터부터 서버에서 생성된 로그 파일이나 EBS 스냅샷 등 다양한 목적의 파일들을 보관하는 데 적합합니다. 

S3 는 파일 관리에 강점이 많습니다. 내구성, 가용성, 확장성에 훌륭합니다. 일반 디스크와 다르게 용량에 대해 걱정할 필요가 없습니다. 파일 수와 저장용량에 제한 없이 S3 에 업로드하기만 하면 S3 에서 알아서 파일들을 관리해줍니다. 다양한 종류의 스토리지를 제공해서 파일 접근 빈도, 파일 복제본 수 등에 따라 비용을 아끼는 것도 가능합니다.

파일 보안에 대해서도 여러 암호화 방식을 제공하고 파일에 대한 접근 권한도 유연하게 제어할 수 있습니다. 여러 보안 표준, 규정 준수 인증을 지원하고 대부분의 규제 기관의 규정 준수 요구사항을 충족합니다. 

웹 콘솔을 제공하기 때문에 EC2 를 통해서만 접근할 필요가 없습니다. AWS 의 다른 서비스와 연동할 수 있기 때문에 S3 에 큰 데이터 파일을 업로드하고 관리하면서 동시에 AWS 의 다른 서비스들을 이용해 해당 파일들을 쿼리하고 분석하는 것도 가능합니다. 

버킷과 객체라는 개념이 존재하는데, 한 리전 내에 버킷을 생성하고 버킷 내부에 여러 객체를 업로드해서 관리할 수 있습니다. 디렉터리라는 별도의 개념이 존재하지 않지만 객체의 이름에 '/' 특수문자를 포함해서 디렉터리를 조회하는 것 처럼 이용할 수 있습니다. 

## 비용 절감하기

### 스팟 인스턴스
AWS 에서는 서버 사용율을 어느 수준 이상으로 유지하기 위해 사용자들이 임시로 서버를 빌려서 사용할 수 있게 스팟 인스턴스 기능을 제공합니다. 사용자에게 스팟 인스턴스는 EC2 를 사용하는 데 드는 비용을 획기적으로 줄일 수 있는 방법입니다. 일반적인 온디맨드 인스턴스 요금과 비교해서 최대 90% 요금 할인 혜택을 얻을 수 있습니다.

스팟 인스턴스 동작원리는 사용자가 이용하고 싶은 인스턴스 사양과 그 수를 설정해두고 경매를 통해 해당 인스턴스들을 빌립니다. 만약 나보다 더 높은 가격을 지급하고자 하는 사용자가 나타나면 내가 사용하고 있는 인스턴스는 해당 사용자에게 빼앗기게 됩니다. 물론 다른 사용자가 나타나도 서버가 갑자기 종료되거나 내가 사용하던 데이터를 다음 사용자가 조회할 수 있는 것은 아닙니다. 다른 사용자에게 넘어가게 되면 스팟 인스턴스에는 서버가 곧 다른 사용자에게 넘어갈 것이라는 신호가 전송되고 2분이라는 시간이 주어집니다. 2분 뒤에는 서버가 넘어가게 되므로 그 전에 작업 중이던 내용을 정리해야 합니다. 싼 가격으로 많은 서버를 임시로 구할 수 있는 장점과 서버들이 임의로 종료될 수 있는 특성 때문에 대량의 연산과 같은 병렬로 처리할 수 있는 비동기 작업을 처리하는 데 매우 적합합니다. 많은 연산이나 간단한 작업을 수없이 많이 수행하기 위해 서버를 많이 띄워야 하는 상황이면 온디맨드로 서버를 여러 대 갖추기보다는 스팟 인스턴스를 이용해 구성하는 방식으로 엄청난 비용을 절약할 수 있습니다. 

### 예약 인스턴스
RI (Reserved Instance) 라 불리는 예약 인스턴스는, 일반적인 온디맨드 인스턴스 요금과 비교해서 최대 75% 요금 할인 혜택을 얻을 수 있습니다. RI 는 인스턴스에 대한 약정을 걸어서 1년이나 3년 단위로 미리 인스턴스들을 할인된 가격으로 구입해서 사용하는 개념입니다. 

## 파일 제공
대부분 웹 서비스는 이미지등 다양한 형식의 파일을 클라이언트에게 제공해야 합니다. 파일 제공은 여러 가지 방법으로 구현할 수 있습니다. 인스턴스 스토어나 EFS 같은 스토리지에 파일을 저장한 후 EC2 인스턴스에서 nginx 같은 웹 서버나 애플리케이션 서버를 통해 파일을 읽어 들여 파일을 제공할 수도 있습니다. 이럴 경우 파일이 많아지면 관리가 매우 힘들어집니다. 디스크 용량 관리, 파일 백업, 성능 등의 다양한 측면에서 관리가 매우 힘들어집니다. AWS 에서 파일을 쉽고 효과적으로 제공할 수 있는 서비스를 제공합니다. 

### S3
S3 는 파일 스토리지 뿐만아니라 파일 제공 기능도 제공합니다. 클라이언트에게 제공돼야 하는 파일 중 코드와 같이 서버에 함께 배포되지 않은 파일들을 모두 S3 같은 곳에 저장하고 관리하는 것이 좋습니다. 사용자의 이미지 등 파일들을 S3 에 올린 뒤 업로드된 객체의 경로만 데이터베이스에 저장해두면 다음부터는 클라이언트에서 직접 파일을 요청해서 내려받을 수 있습니다. 용량 확장, 파일 유실, 성능, 트래픽 등 운영에 필요한 내용은 S3 에서 관리하고 처리하기 때문에 그 부분은 신경쓰지 않아도 됩니다. 

더불어 S3 는 정적 웹 사이트 호스팅 기능도 지원합니다. 예전에는 HTML, 이미지, JS, CSS 파일로만 이뤄진 웹 사이트라도 서버에 웹 서버를 설치해서 호스팅했어야 하지만, S3 를 이용하면 해당 파일들을 S3 에 올리고 웹 사이트 호스팅 기능을 설정하는 것만으로도 정적 웹 사이트 호스팅도 가능합니다. 

### CloudFront
CloudFront 는 AWS 에서 제공하는 CDN (콘텐츠 전송 네트워크) 서비스 입니다. CDN 은 여러 지역에 있는 사용자들에게 더 빠르게 콘텐츠를 전달할 수 있는 방식입니다. 클라이언트가 콘텐츠를 요청할 때 원본 데이터를 가진 오리진 서버가 응답을 주는 대신 클라이언트와 더욱 가까운 곳에 존재하는 CDN 서버가 대신 응답을 주어 훨씬 빠른 속도로 콘텐츠를 전달할 수 있게 됩니다. CDN 을 이용하면 오리진 서버에 갈 요청을 CDN 서버들이 분산해서 처리하기 때문에 오리진 서버에 대한 트래픽이나 부하를 줄일 수 있는 장점이 있습니다. CDN 이 효율적으로 작동하기 위해서는 어느 위치에서도 클라이언트에게 빠르게 응답을 줄 수 있도록 CDN 서버가 여러 지역에 존재해야 합니다. AWS 에서는 CloudFront 라는 CDN 서비스를 제공합니다. CloudFront 는 29 개국 62개 도시에 136개의 PoP (엣지 로케이션 125개, 리전별 엣지 캐시 11개) 를 보유하고 있습니다. 

S3 의 원본 데이터가 수정되거나 삭제될 경우 복사본을 가진 모든 CDN 서버 데이터를 업데이트 하거나 삭제할 수 있습니다. S3 와 CloudFront 모두 AWS 서비스이기 때문에 간단히 연동할 수 있습니다. 

## 데이터 저장

AWS 에서는 관계형 데이터 베이스 서비스인 RDS 와 인 메모리 스토어 서비스인 ElastiCache 를 제공합니다. 

### RDS
Relational Database Service 는 AWS 에서 제공하는 관계형 데이터베이스 서비스입니다. RDS 는 MySQL, Oracle, MSSQL 등 가장 많이 사용되는 데이터베이스 엔진부터 Amazon Aurora 라는 MySQL 기반의 AWS 에서 확장한 데이터베이스 엔진도 제공합니다. 

### ElastiCache
 웹 서비스를 운영하다 보면 성능 개선을 위해 자주 접근해야 하는 데이터를 캐시하거나 세션과 같이 일정 시간 지나면 만료되는 데이터를 관리해야하는 경우가 있습니다. 이 때, 일반 데이터베이스보다 훨씬 빠르고 자동으로 데이터 만료를 관리해주는 Redis 나 Memcached 같은 인 메모리 데이터 스토어를 사용합니다. 

인 메모리 데이터 스토어를 직접 EC2 에 설치한 뒤 관리할수도 있지만, AWS 에서 자체적으로 제공하는 ElastiCache 서비스를 이용하여 간단히 셋팅할 수도 있습니다. 가장 많이 사용되는 인 메모리 스토어인 Redis, Memcached 중 하나를 이용해 메모리 데이터 스토어를 구성할 수 있도록 해줍니다. 

## 알림

### SNS
웹 서비스를 개발하면, 사용자들에게 모바일 푸시 알림, 문자 같은 알림을 보내야 하는 경우가 있습니다. 사용자뿐만 개발자나 서버 관리자들에게도 알림을 보내야 하는 경우가 있습니다. 이런 역할을 해주는 서비스가 SNS (Simple Notification Service) 입니다. 

SNS 는 구독하는 엔드포인트들에게 다양한 포맷의 메시지를 전달합니다. 회원들이나 관리자 등 알림을 받을 사람들의 푸시 ID, 이메일 주소, 휴대폰 번호들을 등록해두면, SNS 를 이용해 해당 사용자에게 원하는 방법으로 메시지를 발송할 수 있습니다. 모바일 알림, 문자, 이메일 외에도 AWS 다른 서비스나 HTTP 엔드포인트에도 메시지를 보낼 수 있습니다. 

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTg1MDIzOTE5MSw3OTM4OTQ4ODksMTI5Mj
Q4ODIxMywxMDc3MDk3NjIwLC0xOTAzNzA5MTE0LC0xMjQ0MzMx
MjY1LDkyMDg3MzI3NCwxMjA5NjAwMzMzLC0xNzg4OTU3MzkxXX
0=
-->