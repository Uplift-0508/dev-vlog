# 디버깅과 개발자 도구

## 자바스크립트 디버깅 방법

### 개발자 옵션 활성화
앱 내부 개발자 메뉴를 통해 크롬 개발자 도구를 활성화합니다. 
iOS 시뮬레이터에서는 커멘드+D 를 누르면 됩니다. 안드로이드 에뮬레이터는 커맨드+M (Mac일 경우) 혹은 컨트롤+M(윈도우일 경우) 을 누르면 됩니다. 
Expo 앱의 경우도 단축키가 같습니다.

### console.log 로 디버깅
자바스크립트 콘솔도 리액트 네이티브에서 바로 사용할 수 있습니다. 
iOS 의 경우 Xcode 를 통해, 
안드로이드의 경우 프로젝트 최상위 폴더에서 logcat 을 실행해서 디바이스 로그를 볼 수 있습니다.
```
adb logcat
```

Xcode 와 logcat 출력 내용은 각 플랫폼 로그까지 포함되어 있어 복잡하므로
```
adb logcat | grep ReactNativeJS
```
로 실행하면 console.log 출력에 ReactNativeJS 라는 태그가 포함되어 있기 때문에 해당 로그만 볼 수 있습니다. 

개발자 메뉴의 'Debug Remote JS' 를 선택하면 웹 브라우저 콘솔이 열립니다. 출력 내용을 보기 위해 크롬 개발자 콘솔을 열면됩니다.

그런데 어떻게 크롬에서 디버깅이 가능할 까요? Debug JS Remotely 가 활성화된 상태로 리액트 네이티브 앱이 실행되면 브라우저는 표준 ```<script>``` 태그를 이용해서 리액트 네이티브 패키저에 있는 자바스크립트를 불러옵니다. 이를 통해 브라우저 기반 디버깅이 가능합니다. 리액트 네이티브 패키저는 웹소켓을 이용해서 디바이스와 브라우저 사이에 명령어를 주고 받습니다. 

### 자바스크립트 디버거 사용하기

### 리액트 개발자 도구 사용하기
```
npm install -g react-devtools
react-devtools
```

### 리액트 네이티브 개발자 도구
#### 엘리먼트 인스펙터 사용하기
앱 내부 개발자 옵션에 Toggle inspector 기능을 이용하면 컴포넌트 계층구조를 빠르게 살펴보고 스타일을 확인할 수 있습니다. 

#### 빨간 에러 화면
빨간 에러 화면을 닫고 싶을 때 시뮬레이터에서 ESC 키를 누르면, 에러 화면이 닫히고 앱 화면이 다시 보입니다.

### 자바스크립트 코드에서 발생하는 문제가 아닌 다른 원인에서 발생한 문제 디버깅하기

#### 개발 환경 문제
리액트 네이티브 패키저가 시작될 때
npm start 혹은 react-native run-android 명령어로 앱을 빌드하거나 실행할 때 문제가 발생하면 디펜던시 문제일 수 있습니다. 
보통은 npm 패키지를 전부 삭제한 뒤 다시 설치하면 해결됩니다.
```
rm -rf node_modules
npm install
```

#### Xcode 문제
Xcode 에서 X is undefined 에러 메시지가 발생하면 다음 절차대로 자바스크립트 디펜던시를 재확인합니다.
1. 패키저 종료
2. Xcode 종료
3. 프로젝트 디렉터리에서 npm install 실행
4. Xcode 재실행

#### 안드로이드 문제
react-native run-android 를 실행할 때, 에러 메시지가 발생하며 앱이 로딩이 되지 않는다면, 안드로이드 디펜던시가 누락되었거나 안드로이드 가상 디바이스(혹은 USB 에 연결된 디바이스) 가 시작되지 않아서 발생한 경우가 일반적입니다. 
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTYzMzUxNjkwNywtMzYyNzUxNTM2LC0yMD
Y4MDU5MzcwLC00OTIwMDYwNjAsLTE1NTQ1NjY0ODMsMTg5Mjk2
MzQ0Myw5MTgzNTA3OThdfQ==
-->