# 모듈과 네이티브 코드

리엑트 네이티브가 지원하지 않는 API 를 쓰고 싶을 때는, 리액트 네이티브 커뮤니티에 공개된 모듈을 npm 을 이용해서 사용할 수 있습니다.

## npm 을 이용한 자바스크립트 라이브러리 설치
리액트 네이티브는 npm 을 이용해서 디펜던시를 관리합니다. npm 은 node.js 를 위한 패키지 매니저지만 npm 에는 node 프로젝트에서 사용하는 패키지뿐만 아니라 node 가 아닌 다른 자바스크립트 프로젝트를 위한 패키지도 포함되어 있습니다. npm 의 경우 디펜던시 목록을 포함한 프로젝트 메타데이터를 package.json 에 저장합니다. 

다른 패키지를 npm install 해서 설치할 수 있는데, 이때 주의할 점은, DOM 을 다루는 함수는 리액트 네이티브에서 동작하지 않는 다는 점입니다. npm 의 대부분이 node.js 나 웹 환경에서 실행될 것을 염두에 두고 만들어졌기 때문에, 리액트 네이티브에서 사용하려면 약간의 편법이 필요할 수 있습니다. 그래도 웹만한 자바스크립트 패키지는 리액트 네이티브에서 바로 사용할 수 있고 다른 자바스크립트와 동일하게 npm 으로 디펜던시를 관리할 수 있습니다. 

## 네이티브 코드를 사용하는 서드파티 컴포넌트 설치

## 자바 네이티브 모듈
안드로이드용 네이티브 모듈은 iOS 용 네이티브 모듈과 비슷하게 동작합니다. iOS 에서와 마찬가지로, 네이티브 코드가 포함된 안드로이드용 모듈을 설치했다면 package.json 에 추가 후 react-native link 를 실행해야 합니다. 

## 크로스 플랫폼 네이티브 모듈
크로스 플랫폼 네이티브 모듈을 만드는 것도 가능합니다. 플랫폼별로 구분해서 모듈을 만들고 통합된 자바스크립트 인터페이스를 제공하면 됩니다. 코드 재사용을 극대화하면서 플랫폼별로 최적화하는 것이 좋습니다. 

크로스 플랫폼 네이티브 모듈을 만들기 위해서는 추가적인 설정이 많이 필요하지 않습니다. iOS 와 안드로이드 버전을 별도로 구현하고 index.ios.js 와 index.android.js 파일을 담을 폴더를 하나 만듭니다. 두 파일에서 각각 해당하는 플랫폼 네이티브 모듈을 불러오면 됩니다. 그 다음 폴더 이름을 import 문으로 불러오면 리액트 네이티브가 플랫폼에 맞는 버전을 선택해서 사용합니다. 리액트 네이티브 모듈을 만들 때 꼭 iOS 와 안드로이드에서 동일하게 사용 가능한 API 를 제공해야 하는 것은 아닙니다. 

## 요약
네이티브 모듈이 필요한 상황
- 네이티브 모듈을 사용해서 오브젝티브C 나 자바 코드를 사용하고 싶은 경우
- 그래픽 연산처럼 성능이 중요하고 멀티스레드 처리를 하는 코드를 작성할 경우
- 리액트 네이티브에서 아직 지원하지 않는 API 를 사용할 경우
> 사용하기 원하는 네이티브 API 를 리액트 네이티브가 아직 지원하지 않을 경우, 1. 커뮤니티에서 해당 문제를 해결한 모듈을 찾아서 사용 2. 만약 그런 모듈이 없을경우, 직접 문제를 해결하는 모듈을 만들고 커뮤니티에 공개합니다. 

성능적인 면이 매우 중요한 경우나 특수한 연산을 해야할 때는 개발하려는 플랫폼의 네이티브 언어를 사용하는 것이 적합합니다. 이 경우 오브젝티브C나 자바에서 많은 일을 처리하고 결과만 자바스크립트 앱으로 전달하는 것이 일반적입니다. 




<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE1NzcyNjc0NjUsMTQwNzQzNjkwNiwtMT
EwNTQzMDg5OCwtMTUyNTEyOTU2MywxMjAxNjU5MTA2LDg4ODA5
MDM2LC0yMDA2MzI5NzAwLC05NzQzNDkxNzUsLTIwODg3NDY2MT
JdfQ==
-->