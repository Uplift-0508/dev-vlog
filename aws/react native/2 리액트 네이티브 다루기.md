# 리액트 네이티브 다루기

## 리액트 네이티브는 어떻게 동작할까 ?

리액트 네이티브의 동작을 이해하기 위해서는 리액트 특징 중 하나인 **가상 DOM** 을 알아야 합니다. 

**가상 DOM** 은, 화면이 어떤 모습이어야 하는지, 개발자가 작성한 내용과 실제 화면에 렌더링되는 것 사이에 존재하는 레이어입니다. 

브라우저와 상호작용하는 사용자 인터페이스를 렌더링하기 위해서는 브라우저의 DOM (Document Object Model) 을 수정해야 합니다. 이는 비용이 많이 드는 동작으로 과도한 DOM 수정은 성능 저하를 유발합니다. 리액트는 페이지 변화를 바로 반영해서 렌더링하지 않고, 먼저 메모리에 존재하는 가상 DOM 에서 변화가 필요한 곳을 계산한 뒤 필요한 최소한의 변경사항만 렌더링합니다.

가상 DOM 은 (개발자 코드와 실제 렌더링되는 것 사이에 존재하는 추상화 레이어로 인해) 추상화 측면에서 큰 잠재력이 있습니다. 물론 성능 최적화의 이점도 있습니다. 

리액트 네이티브는 Objective-C API 를 호출해서 iOS 컴포넌트로 렌더링하고, Java API 를 호출해서 안드로이드 컴포넌트로 렌더링합니다. 이것은 리액트 네이티브의 '브릿지' 가 대상 플랫폼의 네이티브 UI 요소에 접근하는 인터페이스를 제공하기 때문에 가능한 일입니다.

리액트 컴포넌트는 렌더함수에서 어떻게 보여야 하는지가 설명되어 있는 마크업을 전달합니다. 컴포넌트는 웹 페이지를 위한 리액트에서는 바로 DOM 으로 전환되지만, 리액트 네이티브에서는 플랫폼에 맞춰서 전환됩니다. **가상 DOM 이라는 추상화 레이어 덕분에 리액트 네이티브는 다른 플랫폼까지 지원이 가능합니다. ** 물론 이때, 해당 플랫폼을 위한 브리지를 만들어야 가능합니다.

## 랜더링 lifecycle
브라우저에서 리액트가 동작할 때, 렌더링 lifecycle 은 리액트 컴포넌트를 마운팅하면서 시작합니다. 

**리액트 컴포넌트 마운팅 과정**
(페이지 렌더) -> (컴포넌트를 DOM 에 마운팅) -> (컴포넌트 렌더링)

**리액트 컴포넌트 렌더링 과정**
(state/props 변경) -> (가상 DOM 에서 차이점 계산) -> (컴포넌트 다시 렌더링)

리액트 네이티브는 라이프사이클은 웹에서의 렌더링과 같지만, 렌더링 절차는 조금 다릅니다. 리액트 네이티브는 브리지에 의존하기 때문입니다. 

**브리지**는 자바스크립트에서 발생하는 호출을 플랫폼 API 와 UI 엘리먼트에 연결합니다. 예를 들어 iOS 의 경우 Objective-C 코드를, 안드로이드 경우 Java 코드를 호출합니다. **리액트 네이티브는 메인 UI 스레드에서 동작하지 않기 때문에 사용자 경험에 영향을 주지 않고 비동기적으로 실행할 수 있습니다.**

## 리액트 네이티브 컴포넌트 만들기
리액트 네이티브 컴포넌트는 일반적인 리액트 컴포넌트와 대부분 비슷하지만 **렌더링과 스타일 적용 방법에서 큰 차이**가 있습니다.

### 뷰 작업하기
리액트를 이용해서 웹 페이지를 만들 때는 일반적인 HTML 요소 (div, p, span, a 등) 을 사용해서 렌더링합니다. 리액트 네이티브는 이 대신에 플랫폼에 종속적인 리액트 컴포넌트를 사용합니다. 가장 기본적인 컴포넌트는 크로스 플랫폼 View 입니다. div 와 유사한데 View 컴포넌트는 iOS 에서는 UIView 로 렌더링되고 안드로이드에서는 View 로 렌더링됩니다. 

리액트 네이티브로 작업할 경우 컴포넌트의 역할에 따라 **마크업을 렌더링하는 컴포넌트**와 **로직이나 자식 컴포넌트를 다루는 컴포넌트**로 구분하여 작성하는 경우가 많습니다. 이는 결과적으로 코드를 플랫폼에 독립적으로 재사용할 때 유리합니다. 즉 UI 부분만 플랫폼에 따라 교체하면 로직은 재사용이 가능합니다.

### JSX 사용하기
리액트 네이티브에서도 리액트와 동일하게 JSX(JavaScript XML) 를 이용해서 뷰를 만듭니다. JSX 로 마크업과 이를 다루는 자바스크립트를 한 파일 안에 작성합니다. 리액트가 처음 공개되었을 때 개발자들은 JSX 에 대해 의견이 분분했습니다. CSS, HTML, javascript 를 서로 다른 파일로 구분하는 것이 너무나 당연했기 때문입니다. 리액트 네이티브의 .js 파일은 모두 JSX 파일입니다. 
JSX 는 기술에 따라 코드를 분리하는 것 보다 **하는 일에 따라 코드를 분리하는 것을 더 중요하게 생각**했습니다. 
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE3NjQ1ODk2OTAsLTcyNDc4NDE1OCwtMT
k0MzgwNjAzOSwtNzI1MDc1MTgwLC0xMzEwNjQ3NTU1LC0xNjM2
NTgxODMxLC0xNTEwOTYzMDU2LDE2ODU2OTUyMDIsMTQzMDY2NT
gxMCwtMTAxNzg4MDcwNywtMTk3MzAxNzE4NywtMTI2NTg3NjYy
LC01NDUyODg2MzUsMTYwMjM1MzY2NCw0NjUwMjk0NDQsLTg5OD
UzMzYzMCwtMTk3MzczNTIyNSw3MzA5OTgxMTZdfQ==
-->